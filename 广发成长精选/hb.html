<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>广发成长精选营销材料包</title>
    <meta id="viewport" name="viewport" content="" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="x5-fullscreen" content="true" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <link rel="stylesheet" href="./css/common.css?v=202011200016" />
    <!-- <script type="text/javascript" src="./js/resize.js"></script> -->
    <style>
      #download-video {
        display: block;
        color: #ffffff;
        font-size: 16px;
        background-color: #880523;
        border-radius: 4px;
        width: 100px;
        line-height: 30px;
        margin: 20px auto;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <div class="hb">
      <img src="" id="hb-img" />
      <embed src="" type="application/pdf" id="hb-pdf" />
    </div>
    <div class="video-wrapper">
      <video
        id="video-play"
        src=""
        controls="controls"
        webkit-playsinline="true"
        playsinline="true"
        x-webkit-airplay="allow"
        x5-video-player-type="h5"
        x5-video-player-fullscreen="false"
        x5-video-orientation="portrait"
        crossorigin="anonymous"
        preload="auto"
        autoplay="autoplay"
      >
        您的浏览器不支持 video 标签。
      </video>
      <!-- <div class="close"><img src="./images/close.png" /></div> -->
      <a href="" id="download-video" download="">下载视频</a>
      <div style="color: #880523; padding: 0 0.4rem">
        温馨提示：若要下载视频到本地,请点击微信右上角菜单,选择浏览器打开,再点击下载按钮。
      </div>
    </div>
    <script
      type="text/javascript"
      src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"
    ></script>
    <!-- <script type="text/javascript" src="./js/zepto.min.js"></script> -->
    <script type="text/javascript" src="./js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="./js/wechat.js?v=202011200016"></script>

    <script type="text/javascript">
      function getQueryString(name) {
        var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i')
        var r = window.location.search.substr(1).match(reg)
        if (r != null) return decodeURI(r[2])
        return null
      }
      $(function () {
        var url = decodeURI(getQueryString('url'))
        var name = decodeURI(getQueryString('name'))
        var type = decodeURI(getQueryString('type'))
        var path = url.replace(/X/g, '/').replace(/P/g, '.')
        // var isDoc = path.split('.')[1].includes('docx')
        if (type === 'video') {
          $('#viewport').attr(
            'content',
            'width=device-width,user-scalable=yes,initial-scale=1,maximum-scale=5,minimum-scale=1'
          )
          $('.hb').hide()
          $('.video-wrapper video').attr('src', path)
          document.addEventListener(
            'WeixinJSBridgeReady',
            function () {
              document.getElementById('video-play').play()
            },
            false
          )
          $('#download-video')
            .attr('href', path)
            .attr('download', name + '.mp4')
          $('.video-wrapper').show()
        } else if (type === 'pdf') {
          $('#hb-img').hide()
          $('#hb-pdf').attr('src', path + '?v=20201229')
        } else {
          $('#hb-pdf').hide()
          $('#hb-img').attr('src', path + '?v=20201229')
        }
      })
    </script>
  </body>
</html>
