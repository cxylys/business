<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>html2canvas</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="x5-fullscreen" content="true" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta name="referrer" content="no-referrer" />
    <link rel="stylesheet" href="css/common.css" />
    <script
      type="text/javascript"
      src="http://static.shyuming.com.cn/public/resize.js"
    ></script>
  </head>

  <body>
    <div class="container" id="create">
      <div class="fund-code">
        <img src="images/test2.png" />
      </div>
      <div class="result">
        <p>热烈祝贺</p>
        <p>中国银行</p>
        <p>刘洋&nbsp;&nbsp;销售</p>
        <p>789元</p>
      </div>
      <a
        href="javascript:"
        class="test"
        style="color: burlywood; font-size: 0.36rem"
        >生成</a
      >
    </div>
    <img src="" id="test-hb" />
    <script
      type="text/javascript"
      src="http://static.shyuming.com.cn/public/zepto.min.js"
    ></script>
    <script
      type="text/javascript"
      src="http://static.shyuming.com.cn/public/html2canvas.js"
    ></script>
    <script>
      $('.test').click(function () {
        $(this).hide()
        console.log('开始')
        console.log(new Date().valueOf())
        html2canvas(document.querySelector('#create'), {
          allowTaint: true,
          useCORS: true,
          backgroundColor: 'transparent',
        }).then((canvas) => {
          // document.body.appendChild(canvas)
          // canvas为转换后的Canvas对象
          console.log(new Date().valueOf())
          console.log('结束')
          console.log(canvas)
          var url = canvas.toDataURL() // 导出图片
          $('#create').hide()
          $('#test-hb').attr('src', url).show()
        })
      })
    </script>
  </body>
</html>
